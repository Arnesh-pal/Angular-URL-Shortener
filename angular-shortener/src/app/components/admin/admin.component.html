<div class="mx-auto w-full max-w-4xl animate-fade-in-up">
    <h1 class="mb-6 text-center font-['Orbitron'] text-3xl font-bold uppercase tracking-wider text-gray-100 md:text-4xl"
        style="text-shadow: 0 0 10px #00f6ff, 0 0 20px #00f6ff">
        History
    </h1>

    @if(isLoading()) {
    <p class="py-8 text-center text-cyan-300">Loading data from the digital void...</p>
    } @else if(urlHistory().length === 0) {
    <p class="py-8 text-center text-slate-400">No URLs have been shortened yet.</p>
    } @else {
    <div class="overflow-x-auto rounded-lg border border-cyan-400/30 bg-gray-900/50 shadow-lg backdrop-blur-sm">
        <table class="min-w-full text-left text-sm text-gray-300">
            <thead class="bg-gray-900 text-xs uppercase text-cyan-300">
                <tr>
                    <th scope="col" class="px-6 py-3">Original URL</th>
                    <th scope="col" class="px-6 py-3">Short URL</th>
                    <th scope="col" class="px-6 py-3 text-center">Clicks</th>
                </tr>
            </thead>
            <tbody>
                <!-- Use url._id for tracking -->
                @for(url of urlHistory(); track url._id) {
                <tr class="border-b border-gray-700 transition-colors duration-200 hover:bg-gray-800/50">
                    <td class="max-w-xs truncate px-6 py-4 font-medium text-gray-400">{{ url.originalUrl }}</td>
                    <td class="px-6 py-4">
                        <!-- ============================================= -->
                        <!-- START: UPDATE THE (click) EVENT HERE          -->
                        <!-- ============================================= -->
                        <a [href]="getFullShortUrl(url.shortCode)" target="_blank" rel="noopener noreferrer"
                            (click)="handleLinkClick(url)" class="font-mono text-fuchsia-400 hover:underline">
                            {{ getFullShortUrl(url.shortCode) }}
                        </a>
                        <!-- ============================================= -->
                        <!-- END: UPDATE                                   -->
                        <!-- ============================================= -->
                    </td>
                    <td class="px-6 py-4 text-center font-mono text-lg">{{ url.clicks }}</td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
</div>